<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@atomist/automation-seed</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@atomist/automation-seed</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> @atomist/automation-seed</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="-atomist-automation-seed">@atomist/automation-seed</h1>
				<p><a href="https://badge.fury.io/js/%40atomist%2Fautomation-seed"><img src="https://badge.fury.io/js/%40atomist%2Fautomation-seed.svg" alt="npm version"></a>
				<a href="https://travis-ci.org/atomist/automation-seed-ts"><img src="https://travis-ci.org/atomist/automation-seed-ts.svg?branch=master" alt="Build Status"></a></p>
				<p>This repository contains examples demonstrating use of
				the <a href="https://atomist.com/" title="Atomist - How Teams Deliver Software">Atomist</a> API.  You will find examples illustrating:</p>
				<ul>
					<li>Creating bot commands using <em>command handlers</em></li>
					<li>Responding to DevOps events, e.g., commits pushed to a repository,
					using <em>event handlers</em></li>
				</ul>
				<p>These examples use the <a href="https://github.com/atomist/automation-client-ts" title="@atomist/automation-client Node Module"><code>@atomist/automation-client</code></a> node
				module to implement a local client that connects to the Atomist API.</p>
				<h2 id="prerequisites">Prerequisites</h2>
				<p>Below are brief instructions on how to get started running this
					project yourself.  If you just want to use the core functionality of
					Atomist, see the <a href="https://docs.atomist.com/" title="Atomist User Guide">Atomist documentation</a>.  For more detailed
					information on developing automations, see the <a href="https://docs.atomist.com/developer/" title="Atomist Developer Guide">Atomist Developer
				Guide</a>.</p>
				<h3 id="github-account">GitHub account</h3>
				<p>You must have a GitHub account, either GitHub.com or GitHub Enterprise
					(GHE).  If you want to use Atomist with GHE, please <a href="mailto:support@atomist.com">contact
					Atomist</a>.  The remainder of these
					instructions assume you have a GitHub.com account.  If you do not
					already have a GitHub.com account, you can <a href="https://github.com/join" title="Join GitHub">create
				one</a>.</p>
				<p>To run automations, you will need a GitHub <a href="https://github.com/settings/tokens" title="GitHub Personal Access Tokens">personal access
					token</a> with &quot;read:org&quot; scope.  You can create one yourself or
				use the Atomist CLI to do it for you (see below).</p>
				<h3 id="atomist-workspace">Atomist workspace</h3>
				<p>You also need to sign up with Atomist and create a workspace.  Once
					you have a GitHub.com account, you can sign up with Atomist at
					<a href="https://app.atomist.com/" title="Atomist Web Interface">https://app.atomist.com/</a>.  Once you are registered with
					Atomist, you can create an Atomist workspace and add your GitHub user
				and/or organizations to that workspace.</p>
				<p>Once you have created your Atomist workspace, take note of your
					Atomist workspace/team ID.  You can always find your Atomist workspace
					ID on the workspace&#39;s settings page or, if you have added the Atomist
					app to Slack, you can send the Atomist bot the message <code>team</code> and it
				will tell you the workspace/team ID.</p>
				<h3 id="slack">Slack</h3>
				<p>Atomist has a powerful <a href="https://slack.com/" title="Slack">Slack</a> application, allowing you to
					see and act on your development activity right in Slack.  Slack is not
					a requirement for using Atomist, but if you try it, you&#39;ll probably
					like it.  If you do not have access to a Slack team, it is easy to
				<a href="https://slack.com/get-started#create" title="Create a Slack Team">create your own</a>.</p>
				<p>In your Slack team, install the Atomist app in Slack, click the button
				below.</p>
				<p align="center">
					<a href="https://atm.st/2wiDlUe">
						<img alt="Add to Slack" height="50" width="174" src="https://platform.slack-edge.com/img/add_to_slack@2x.png" />
					</a>
				</p>
				<p>Once installed, the Atomist bot will guide you through connecting
				Atomist, Slack, and GitHub.</p>
				<h3 id="configuration">Configuration</h3>
				<p>Once you have GitHub and Atomist set up, install the Atomist CLI and
				configure your local environment.</p>
				<pre><code class="lang-console"><span class="hljs-meta">$</span><span class="bash"> npm install -g @atomist/automation-client</span>
<span class="hljs-meta">$</span><span class="bash"> atomist config</span>
</code></pre>
				<p>The second command does two things: records what Atomist
					workspace/team you want your automations running in and creates a
					<a href="https://github.com/settings/tokens" title="GitHub Personal Access Tokens">GitHub personal access token</a> with &quot;repo&quot; and &quot;read:org&quot;
				scopes.</p>
				<p>The script will prompt you for your Atomist workspace/team ID, or you
					can supply it using the <code>--team TEAM_ID</code> command-line option.  You can
					get your Atomist team ID from the settings page for your Atomist
				workspace or by typing <code>team</code> in a DM to the Atomist bot.</p>
				<p>The script will prompt you for your GitHub credentials.  It needs them
					to create the GitHub personal access token.  Atomist does not store
					your credentials and only writes the generated token to your local
				machine.</p>
				<p>The Atomist API client authenticates using a GitHub personal access
					token.  The Atomist API uses the token to confirm you are who you say
					you are and are in a GitHub organization connected to the Slack team
					in which you are running the automations.  In addition, it uses the
				token when performing any operations that access the GitHub API.</p>
				<h2 id="running">Running</h2>
				<p>You can run this automation using its Docker container, e.g., in
				Kubernetes, or locally.</p>
				<h3 id="docker-and-kubernetes">Docker and Kubernetes</h3>
				<p>To download and run the Docker image of this project, run the
				following command</p>
				<pre><code class="lang-console"><span class="hljs-meta">$</span><span class="bash"> docker run --rm -e ATOMIST_TOKEN=YOUR_TOKEN -e ATOMIST_TEAMS=TEAM_ID \</span>
    atomist/automation-seed-ts:VERSION
</code></pre>
				<p>replacing <code>YOUR_TOKEN</code> and <code>TEAM_ID</code> with the token and team ID from
					your <code>~/.atomist/client.config.json</code> created above by the <code>atomist
config</code> command and <code>VERSION</code> with the <a href="https://github.com/atomist/automation-seed-ts/releases/latest">latest release of this
					repo</a>.  Note that this will not be running any code from your
				local machine but the code in the Docker image.</p>
				<p>To run the Docker image in a Kubernetes cluster, you can use the
					<a href="assets/kube/deployment.yaml">deployment spec</a> from this repository as
					a starting point.  Before creating the deployment resource, you will
					need to create a secret with the following command, replacing <code>TOKEN</code>
				and <code>TEAM_ID</code> as above.</p>
				<pre><code class="lang-console"><span class="hljs-meta">$</span><span class="bash"> kubectl create secret generic automation --from-file=<span class="hljs-variable">$HOME</span>/.atomist/client.config.json</span>
<span class="hljs-meta">$</span><span class="bash"> kubectl create -f assets/kube/deployment.yaml</span>
</code></pre>
				<h3 id="locally">Locally</h3>
				<p>You will need to have <a href="https://nodejs.org/" title="Node.js">Node.js</a> installed.  To verify that the
				right versions are installed, run:</p>
				<pre><code class="lang-console"><span class="hljs-meta">$</span><span class="bash"> node -v</span>
v9.7.1
<span class="hljs-meta">$</span><span class="bash"> npm -v</span>
5.6.0
</code></pre>
				<p>The <code>node</code> version should be 8 or greater and the <code>npm</code> version should
				be 5 or greater.</p>
				<h4 id="cloning-the-repository-and-installing-dependencies">Cloning the repository and installing dependencies</h4>
				<p>To get started run the following commands to clone the project,
				install its dependencies, and build the project:</p>
				<pre><code class="lang-console"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">clone</span> git@github.com:atomist/automation-seed-ts.git</span>
<span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> automation-seed-ts</span>
<span class="hljs-meta">$</span><span class="bash"> npm install</span>
<span class="hljs-meta">$</span><span class="bash"> npm run build</span>
</code></pre>
				<h4 id="starting-up-the-automation-client">Starting up the automation-client</h4>
				<p>You can run this repository locally, allowing you to change the source
					code of this project and immediately see the effects in your environment
				with the following command</p>
				<pre><code class="lang-console"><span class="hljs-meta">$</span><span class="bash"> npm run autostart</span>
</code></pre>
				<p>To run in a more traditional manner, build the project and then simple
				start it.</p>
				<pre><code class="lang-console"><span class="hljs-meta">$</span><span class="bash"> npm start</span>
</code></pre>
				<h2 id="using">Using</h2>
				<h3 id="invoking-a-command-handler-from-slack">Invoking a command handler from Slack</h3>
				<p>This project contains the code to create and respond to a simple
					<code>hello world</code> bot command.  The code that defines the bot command and
					implements responding to the command, i.e., the <em>command handler</em>, can
					be found in <a href="https://github.com/atomist/automation-seed-ts/blob/master/src/commands/HelloWorld.ts" title="HelloWorld Command Handler"><code>HelloWorld.ts</code></a>.  Once you have your local
					automation client running (the previous step in this guide), you can
					invoke the command handler by sending the Atomist bot the command as a
					message.  Be sure the Atomist bot is in the channel before sending it
				the message.</p>
				<pre><code>/invite <span class="hljs-meta">@atomist</span>
<span class="hljs-meta">@atomist</span> hello world
</code></pre><p>Once you&#39;ve submitted the command in Slack, you&#39;ll see the incoming
					and outgoing messages show up in the logs of your locally running
					automation-client.  Ultimately, you should see the response from the
				bot in Slack.</p>
				<p>Feel free to modify the code in the <code>HelloWorld</code> command handler,
				Node.js will automatically reload the client, and see what happens!</p>
				<h3 id="triggering-an-event-handler">Triggering an event handler</h3>
				<p>While command handlers respond to commands you send the Atomist bot,
					<em>event handlers</em> take action when different types of events occur in
					your development and operations environment.  Some examples of events
					are commits pushed to a repo, or a CI build that fails, or an instance
					of a running service that becomes unhealthy.  Example responses to those
					events are showing the commits in a Slack message, automatically
				restarting the build, and triggering a PagerDuty alert, respectively.</p>
				<p>The sample event handler in this project, <a href="https://github.com/atomist/automation-seed-ts/blob/master/src/events/NotifyOnPush.ts" title="Atomist NotifyOnPush Event Handler">NotifyOnPush</a>,
					will notice when someone pushes new commits to a repository in the
					GitHub organization and send a notice of that push to all Slack
				channels associated with that repository.</p>
				<p>If you have followed the instructions above and are running these
					automations against the atomist-playground Slack team and GitHub
					organization, go ahead and edit the <a href="https://github.com/atomist-playground/notify-on-push" title="Atomist NotifyOnPush Repository">notify-on-push</a>
					repository by adding some text to its <a href="https://github.com/atomist-playground/notify-on-push/edit/master/README.md" title="Edit NotifyOnPush README">README</a>.  Once you
					have saved your changes, you should see that event appear in the
					console logs of your locally running automation client, followed by a
					log of the actions the event handler is taking.  Once those actions
					are complete, you should see a new message in the
					<a href="https://atomist-playground.slack.com/messages/C7GNF6743/" title="NotifyOnPush Slack Channel"><code>#notify-on-push</code></a> channel in the atomist-playground
				Slack team.</p>
				<h2 id="support">Support</h2>
				<p>General support questions should be discussed in the <code>#support</code>
					channel in our community Slack team
				at <a href="https://join.atomist.com/" title="Atomist Community Slack">atomist-community.slack.com</a>.</p>
				<p>If you find a problem, please create an <a href="https://github.com/atomist/automation-seed-ts/issues">issue</a>.</p>
				<h2 id="development">Development</h2>
				<p>You will need to install <a href="https://nodejs.org/" title="Node.js">node</a> to build and test this project.</p>
				<h3 id="build-and-test">Build and Test</h3>
				<table>
					<thead>
						<tr>
							<th>Command</th>
							<th>Reason</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><code>npm install</code></td>
							<td>install all the required packages</td>
						</tr>
						<tr>
							<td><code>npm run build</code></td>
							<td>lint, compile, and test</td>
						</tr>
						<tr>
							<td><code>npm start</code></td>
							<td>start the Atomist automation client</td>
						</tr>
						<tr>
							<td><code>npm run autostart</code></td>
							<td>run the client, refreshing when files change</td>
						</tr>
						<tr>
							<td><code>npm run lint</code></td>
							<td>run tslint against the TypeScript</td>
						</tr>
						<tr>
							<td><code>npm run compile</code></td>
							<td>compile all TypeScript into JavaScript</td>
						</tr>
						<tr>
							<td><code>npm test</code></td>
							<td>run tests and ensure everything is working</td>
						</tr>
						<tr>
							<td><code>npm run autotest</code></td>
							<td>run tests continuously</td>
						</tr>
						<tr>
							<td><code>npm run clean</code></td>
							<td>remove stray compiled JavaScript files and build directory</td>
						</tr>
					</tbody>
				</table>
				<h3 id="release">Release</h3>
				<p>To create a new release of the project, update the version in
					package.json and then push a tag for the version.  The version must be
					of the form <code>M.N.P</code> where <code>M</code>, <code>N</code>, and <code>P</code> are integers that form the
					next appropriate <a href="http://semver.org">semantic version</a> for release.  The version
				in the package.json must be the same as the tag.  For example:</p>
				<pre><code class="lang-console"><span class="hljs-meta">$</span><span class="bash"> npm version 1.2.3</span>
<span class="hljs-meta">$</span><span class="bash"> git tag -a -m <span class="hljs-string">'The ABC release'</span> 1.2.3</span>
<span class="hljs-meta">$</span><span class="bash"> git push origin 1.2.3</span>
</code></pre>
				<p>The Travis CI build (see badge at the top of this page) will publish
					the NPM module and automatically create a GitHub release using the tag
					name for the release and the comment provided on the annotated tag as
				the contents of the release notes.</p>
				<hr>
				<p>Created by <a href="https://atomist.com/" title="Atomist - How Teams Deliver Software">Atomist</a>.
				Need Help?  <a href="https://join.atomist.com/" title="Atomist Community Slack">Join our Slack team</a>.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_commands_helloautomation_.html">"commands/<wbr>Hello<wbr>Automation"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_commands_helloworld_.html">"commands/<wbr>Hello<wbr>World"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_events_notifyonpush_.html">"events/<wbr>Notify<wbr>OnPush"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_typings_types_.html">"typings/types"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>